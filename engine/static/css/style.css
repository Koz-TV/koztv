@import url('https://fonts.googleapis.com/css2?family=Jost:wght@400;500;700&family=PT+Serif:ital@0;1&family=Fira+Code:wght@400;500&display=swap');

/* RESET */
*, *::before, *::after { box-sizing: border-box; }
* { margin: 0; padding: 0; }
:target { scroll-margin-block: 5ex; }
img, picture, video, canvas, svg { display: block; max-width: 100%; height: auto; }
p, h1, h2, h3 { overflow-wrap: break-word; }

/** CSS Variables - Birman-inspired **/
:root {
  --cap-height: calc(1rem * 13 / 16);
  --cap-ratio: calc(1 / 0.698);
  --gap: calc(var(--cap-height) * 1.2);
  --font-smaller: calc(var(--cap-height) * 11 / 12 * var(--cap-ratio));
  --font-small: calc(var(--cap-height) * 10 / 12 * var(--cap-ratio));
  --width: 640px;
  --width-wide: 960px;
  --border: 1px;
  --radius: 4px;
  --gray-text: rgba(0, 0, 0, 0.55);
  --gray-line: rgba(0, 0, 0, 0.15);
  --gray-bg: rgba(0, 0, 0, 0.04);
  --text: #000;
  --bg: #ffffff;
  --link-color: #0064a8;
  --link-hover: #a03000;
  --accent-color: rgb(255, 80, 32);
  --transition: all 0.2s ease;

  /* Typography */
  --font-sans: 'Jost', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-serif: 'PT Serif', Georgia, serif;
  --font-mono: 'Fira Code', 'SF Mono', monospace;
}

html {
  -moz-text-size-adjust: none;
  -webkit-text-size-adjust: none;
  text-size-adjust: none;
}

body {
  font-size: calc(var(--cap-height) * var(--cap-ratio));
  line-height: 1.6;
  font-family: var(--font-sans);
  font-feature-settings: "kern" 1,"liga" 1,"calt" 1;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  background-color: var(--bg);
  color: var(--text);
  min-height: 100vh;
}

body.winter { --bg: #6ADCFF; }

.page {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  gap: calc(var(--gap) * 3);
}

/* HEADER - Birman-inspired */
header {
  border-bottom: var(--border) solid var(--gray-line);
  background: var(--bg);
  position: sticky;
  top: 0;
  z-index: 100;
}

nav.narrow {
  display: flex;
  gap: calc(var(--gap) * 1.5);
  align-items: center;
  flex-wrap: wrap;
  justify-content: flex-start;
  padding: calc(var(--gap) * 1.2) 0;
  width: 96vw;
  max-width: var(--width-wide);
  margin: 0 auto;
}

nav.narrow a {
  color: var(--text);
  text-decoration: none;
  font-weight: 500;
  font-size: 0.95em;
  padding: 4px 0;
  border-bottom: 2px solid transparent;
  transition: var(--transition);
}

nav.narrow a:hover,
nav.narrow a.active {
  color: var(--link-hover);
  border-bottom-color: var(--link-hover);
  background: none;
}

nav.narrow a.site-name {
  font-family: var(--font-sans);
  font-weight: 700;
  font-size: 1.15em;
  margin-right: calc(var(--gap) * 0.5);
}

/* MENU */
.menu {
  width: min(var(--width), 96vw);
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: var(--gap);
  color: var(--gray-text);
}

.menu > li {
  list-style: none;
}

.menu > li > a {
  border-color: transparent;
  color: inherit;
  text-decoration: none;
}

.menu > li.inside > a {
  border-bottom: var(--border) solid var(--gray-line);
}

.menu > li.selected > a,
.menu > li:hover > a {
  color: var(--link-hover);
  border-bottom: var(--border) solid var(--link-hover);
}

.menu > .spacer {
  flex-grow: 1;
}

/* MAIN CONTENT */
main {
  flex: 1;
  padding: calc(var(--gap) * 2) 0 calc(var(--gap) * 4);
}

.cover {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.cover > img {
  width: auto;
  max-height: 50svh;
}

.content {
  display: flex;
  flex-direction: column;
  gap: calc(var(--gap) * 1.2);
  align-items: center;
}

.cover + .content {
  margin-top: calc(var(--gap) * 2);
}

.content > * {
  width: 96vw;
  max-width: var(--width);
}

/* HEADERS */
.title, h1, h2, h3 {
  font-family: var(--font-sans);
  font-weight: 700;
  line-height: 1.15;
  text-wrap: balance;
  margin-top: calc(var(--gap) * 2);
  color: var(--text);
}

.title {
  font-size: 2.8em;
  margin: 0 0 calc(var(--gap) * 0.5) 0;
  line-height: 1.1;
}

h1 { font-size: 2em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }

h1:nth-child(1):not(.title) { margin-top: 0; }
h1 + h2, h2 + h3 { margin-top: calc(var(--gap) * 0.5); }
.title + h2 { margin-top: 0; }

/* PARAGRAPHS */
p {
  line-height: 1.7;
}

.loud {
  max-width: calc(var(--width) + 40px);
  font-family: var(--font-serif);
  font-style: italic;
  font-weight: 400;
  line-height: 1.4;
  text-wrap: balance;
  border-left: 3px solid var(--accent-color);
  padding: calc(var(--gap) * 1.5) calc(var(--gap) * 2);
  margin: calc(var(--gap) * 1.5) 0;
  font-size: 1.3em;
  background: var(--gray-bg);
  border-radius: 0 var(--radius) var(--radius) 0;
}

.foot {
  text-align: center;
  font-size: var(--font-small);
  font-style: italic;
  color: var(--gray-text);
}

pre + .foot,
figure + .foot,
blockquote + .foot {
  margin-top: calc(var(--gap) * -0.5);
}

h1 + .foot,
h2 + .foot,
h3 + .foot {
  text-align: left;
  color: var(--gray-text);
}

.fig {
  margin: var(--gap) 0;
  max-width: calc(var(--width) + 60px);
}

sup, sub {
  vertical-align: baseline;
  position: relative;
  font-size: .7em;
  line-height: 1;
}

sup { bottom: 1.4ex; }
sub { top: .5ex; }

img.inline {
  margin: 0;
  display: inline-block;
  position: relative;
  top: 3px;
}

.emoji {
  font-size: 125%;
  line-height: 22.5px;
}

/* FIGURES */
.content > figure {
  width: unset;
  max-width: 96vw;
  margin: calc(var(--gap) * 1.5) 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: calc(var(--gap) * 0.75);
}

.content > figure > img,
.content > figure > video,
.content > figure > iframe,
.content > figure > a > img {
  border-radius: var(--radius);
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.content > figure > a {
  border: none;
}

figcaption {
  max-width: var(--width);
  text-align: center;
  font-size: var(--font-small);
  font-style: italic;
  color: var(--gray-text);
}

.hoverable {
  object-fit: cover;
  object-position: center top;
  height: unset;
}

.hoverable.clicked {
  object-position: center bottom;
}

@media (hover: hover) {
  .hoverable.clicked:hover {
    object-fit: cover;
    object-position: center top;
  }
  .hoverable:hover {
    object-position: center bottom;
  }
}

/* LINKS - Birman-style */
a {
  color: var(--link-color);
  text-decoration: underline;
  text-decoration-color: rgba(0, 100, 168, 0.3);
  text-underline-offset: 2px;
  transition: var(--transition);
}

a:hover {
  color: var(--link-hover);
  text-decoration-color: rgba(160, 48, 0, 0.3);
}

/* Project items - card style */
.project-item {
  display: inline-block;
  width: calc(100% - 16px);
  margin: 0 16px 20px 0;
  text-decoration: none;
  color: var(--text);
  background: none;
  border-radius: var(--radius);
  overflow: hidden;
  transition: transform 150ms ease, box-shadow 150ms ease;
}

.project-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0,0,0,0.1);
}

.project-item img {
  width: 100%;
  border-radius: var(--radius);
  display: block;
  height: auto;
  aspect-ratio: attr(width) / attr(height);
}

.project-item .caption {
  padding: 10px 0 4px;
  font-size: var(--font-small);
  text-align: center;
  color: var(--text);
  font-weight: 500;
  transition: color 150ms ease;
}

.project-item:hover .caption {
  color: var(--link-hover);
}

.project-item.full {
  display: block;
  width: 100%;
  margin-bottom: calc(var(--gap) * 1.5);
}

/* CODE */
pre, code {
  font-family: var(--font-mono);
}

code {
  font-style: normal;
  background: var(--gray-bg);
  padding: 2px 6px;
  border-radius: 3px;
  font-size: var(--font-smaller);
}

h1 > code,
h2 > code,
h3 > code,
h4 > code,
.loud > code,
.foot > code {
  font: inherit;
}

.content > pre,
blockquote > pre {
  max-width: calc(var(--width) + 60px);
  background: #f8f8f8;
  margin: 0 0 var(--gap) 0;
  padding: 20px 24px;
  border-radius: var(--radius);
  white-space: pre-wrap;
  word-wrap: break-word;
  font-style: normal;
  border: var(--border) solid var(--gray-line);
}

pre > code {
  background: none;
  padding: 0;
  font-size: var(--font-small);
  white-space: unset;
}

/* BLOCKQUOTES */
blockquote {
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  margin: calc(var(--gap) * 1.5) 0;
  padding: 0 0 0 calc(var(--gap) * 1.5);
  border-left: 3px solid var(--accent-color);
  font-style: italic;
  color: var(--gray-text);
}

/* LISTS */
.content ul,
.content ol {
  display: flex;
  flex-direction: column;
  gap: calc(var(--gap) * 0.6);
  padding: var(--gap) 0;
  list-style: none;
}

.content li::before {
  content: "â€”";
  color: var(--gray-text);
  margin-right: 0.5em;
}

/* Blog list - clean style */
#blog ul {
  padding: 0;
}

#blog li {
  padding: calc(var(--gap) * 0.4) 0;
  border-bottom: var(--border) solid var(--gray-line);
}

#blog li:last-child {
  border-bottom: none;
}

#blog li::before {
  display: none;
}

#blog li a {
  color: var(--text);
  text-decoration: none;
  display: block;
  transition: color 150ms ease;
}

#blog li a:hover {
  color: var(--link-hover);
}

/* FOOTNOTES */
.footnote,
.reversefootnote {
  margin: 0 5px;
}

.footnotes-br {
  margin-top: calc(2 * var(--gap));
}

.footnotes-br_inner {
  width: 100px;
  height: var(--border);
  background: var(--gray-line);
}

/* FOOTER */
footer.narrow {
  border-top: var(--border) solid var(--gray-line);
  padding: calc(var(--gap) * 2) 0;
  margin-top: auto;
  color: var(--gray-text);
  font-size: var(--font-small);
}

footer.narrow p {
  line-height: 1.5;
}

footer.narrow a {
  color: var(--gray-text);
}

footer.narrow a:hover {
  color: var(--link-hover);
}

.footer {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  gap: 5px;
  color: var(--gray-text);
  font-size: 16px;
  margin: var(--gap) 0;
}

/* BUTTON */
button {
  height: 48px;
  padding: 0 1.6rem;
  background: var(--accent-color);
  border: none;
  border-radius: var(--radius);
  color: white;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
}

button:hover {
  background: var(--accent-hover);
}

button:active,
button[disabled] {
  opacity: 0.7;
}

/* Projects grid - masonry style */
.projects-grid {
  column-count: 3;
  column-gap: calc(var(--gap) * 1.2);
}

@media (max-width: 800px) {
  .projects-grid {
    column-count: 2;
  }
}

@media (max-width: 500px) {
  .projects-grid {
    column-count: 1;
  }
}

/* Layout */
.container {
  width: 96vw;
  max-width: var(--width-wide);
  margin: 0 auto;
  display: flex;
  gap: var(--gap);
  align-items: center;
}

.narrow {
  width: 96vw;
  max-width: var(--width);
  margin: 0 auto;
}

/* Utility */
h1:empty,
.date:empty {
  display: none;
}

/* About section - Birman-inspired */
.about {
  width: 96vw;
  max-width: var(--width-wide);
  margin: 0 auto;
}

.about_inner {
  font-size: 1.1em;
  padding: calc(var(--gap) * 2) calc(var(--gap) * 2.5);
  border: none;
  border-radius: var(--radius);
  display: flex;
  flex-direction: row;
  gap: calc(var(--gap) * 2);
  align-items: center;
  background: var(--gray-bg);
}

.about_inner p {
  line-height: 1.7;
}

.about_photo {
  flex-shrink: 0;
  width: 120px;
  height: 120px;
  border-radius: 50%;
  background-image: url(../img/logo.webp);
  background-size: cover;
  background-position: center;
  box-shadow: 0 2px 12px rgba(0,0,0,0.1);
}

/* Social icons */
.social-icons {
  display: flex;
  gap: calc(var(--gap) * 0.8);
  margin-top: calc(var(--gap) * 1.2);
  align-items: center;
  flex-wrap: wrap;
  justify-content: flex-start;
}

.social-icons a {
  color: var(--text);
  font-size: 1.4em;
  text-decoration: none;
  opacity: 0.6;
  transition: var(--transition);
}

.social-icons a:hover {
  opacity: 1;
  color: var(--link-hover);
}

/* YouTube subscribe widget styling */
.social-icons .g-ytsubscribe {
  display: inline-block;
  vertical-align: middle;
  transform: scale(0.85);
  transform-origin: left center;
}

.social-icons .g-ytsubscribe iframe {
  border: none;
  margin: 0;
  padding: 0;
}

/* Social icons adjustments */
.social-icons i {
  display:inline-block;
  width:1.2em;
  height:1.2em;
  visibility:hidden;
  opacity:0;
  transition: opacity 0.3s;
}
.social-icons i.fa-loaded {
  visibility:visible;
  opacity:1;
}

/* Image fade-in after full load */
.img-wrapper img { visibility:hidden; opacity:0; transition:opacity 0.4s ease-out; }
.img-wrapper.loaded img { visibility:visible; opacity:1; }

/* Home page specific */
body.home header {
  margin-bottom: 0;
}

body.home main {
  padding-top: calc(var(--gap) * 3);
}

/* Show navigation on home page */
body.home nav.narrow {
  display: flex;
}

/* About section responsive layout */
@media (max-width: 700px) {
  .about_inner {
    flex-direction: column;
    text-align: center;
    padding: calc(var(--gap) * 1.5);
  }

  .about_photo {
    margin: 0 auto;
  }

  .social-icons {
    justify-content: center;
  }
}

/* Social icons responsive fixes */
@media (max-width: 600px) {
  nav.narrow {
    gap: calc(var(--gap) * 1);
    padding: calc(var(--gap) * 1) 0;
  }

  nav.narrow a {
    font-size: 0.9em;
  }

  .social-icons a {
    font-size: 1.3em;
  }

  .social-icons .g-ytsubscribe {
    transform: scale(0.75);
  }
}

@media (max-width: 500px) {
  .title {
    font-size: 2.2em;
  }

  h1 { font-size: 1.7em; }
  h2 { font-size: 1.35em; }

  .social-icons a {
    font-size: 1.2em;
  }

  .social-icons .g-ytsubscribe {
    transform: scale(0.65);
  }
}

/* Mobile adjustments */
@media only screen and (max-device-width: 480px) {
  :root {
    --cap-height: calc(1rem * 17 / 16);
  }

  /* Fix content width on mobile */
  .content > * {
    width: 92vw;
    max-width: none;
  }

  /* Fix about section on mobile */
  .about {
    width: 92vw;
    max-width: none;
  }

  .about_inner {
    flex-direction: column;
    padding: var(--gap);
  }

  .about_photo {
    width: 100px;
    height: 100px;
  }

  /* Fix social icons on mobile */
  .social-icons {
    flex-wrap: wrap;
    justify-content: center;
    gap: calc(var(--gap) * 0.5);
  }

  .social-icons a {
    font-size: 1.1em;
  }

  .social-icons .g-ytsubscribe {
    transform: scale(0.55);
  }

  /* Navigation adjustments for mobile */
  nav.narrow {
    gap: calc(var(--gap) * 0.6);
    padding: calc(var(--gap) * 0.8) 10px;
  }

  nav.narrow a {
    font-size: 0.85em;
    padding: 4px 0;
  }
}

/* Projects section */
.projects-wrapper {
  width: 96vw;
  max-width: var(--width-wide);
  margin: 0 auto;
  text-align: center;
  margin-top: calc(var(--gap) * 3);
}

.projects-wrapper h2 {
  margin-bottom: calc(var(--gap) * 1.5);
}

/* === Loader === */
.img-wrapper { position: relative; display: block; }
.img-loader {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--gray-bg);
  border-radius: var(--radius);
}

.loader {
  width: 50px;
  height: 50px;
  border: 3px solid var(--gray-line);
  border-top-color: var(--accent-color);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.social-icons .sub-count {
  font-size: 0.55em;
  color: var(--gray-text, #666);
  margin-left: 0.2em;
  font-weight: 600;
  line-height: 1;
  display:inline-block;
  vertical-align: middle;
}

/* Language switcher */
.lang-switcher {
  font-size: var(--font-small);
  color: var(--gray-text);
  margin-left: auto;
}

.lang-switcher .lang-current {
  font-weight: 600;
  color: var(--text);
}

.lang-switcher .lang-link {
  color: var(--link-color);
}

/* Reply-to link for Telegram posts */
.reply-to {
  font-size: var(--font-small);
  margin-bottom: 1rem;
}

/* Original link to Telegram */
.original-link .fa-telegram {
  color: #0088cc;
}

/* Continuation and next post links */
.continuation,
.next-post {
  margin-top: 2rem;
  padding-top: 1rem;
  border-top: 1px solid var(--gray-line);
  font-size: var(--font-small);
}

.continuation ul {
  margin: 0.5rem 0 0 0;
  padding-left: 1.5rem;
}

/* Post meta */
.post-meta {
  color: var(--gray-text);
  font-size: var(--font-small);
  margin-bottom: calc(var(--gap) * 1.5);
}

.post-meta .date {
  font-style: italic;
}

/* Section headers */
#blog h2,
#projects h2 {
  text-align: left;
  margin-bottom: calc(var(--gap) * 1.5);
}
